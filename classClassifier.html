<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Glassify: Classifier Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Glassify
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classClassifier-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Classifier Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Classifies glass as brown, green or clear and sets state accordingly.  
 <a href="classClassifier.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Classifier_8h_source.html">Classifier.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for Classifier:</div>
<div class="dyncontent">
<div class="center"><img src="classClassifier__coll__graph.png" border="0" usemap="#Classifier_coll__map" alt="Collaboration graph"/></div>
<map name="Classifier_coll__map" id="Classifier_coll__map">
<area shape="rect" id="node2" href="classServo.html" title="Provides all functions required for motor control. " alt="" coords="5,5,64,32"/>
<area shape="rect" id="node3" href="classCamera.html" title="Setups camera and enables image capture and retrival. " alt="" coords="106,5,179,32"/>
<area shape="rect" id="node4" href="classState.html" title="Contains all interfacing for reading or setting system state. " alt="" coords="217,5,274,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1ddf8171faa93f0a8ad4c230f1fa9554"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classClassifier.html#a1ddf8171faa93f0a8ad4c230f1fa9554">Classifier</a> (<a class="el" href="classState.html">State</a> *_stateptr, <a class="el" href="classCamera.html">Camera</a> *_cameraptr, <a class="el" href="classServo.html">Servo</a> *_servoptr)</td></tr>
<tr class="memdesc:a1ddf8171faa93f0a8ad4c230f1fa9554"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor which sets up Mat arrays for all frames required for classification.  <a href="#a1ddf8171faa93f0a8ad4c230f1fa9554">More...</a><br /></td></tr>
<tr class="separator:a1ddf8171faa93f0a8ad4c230f1fa9554"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54e011d65ca4ab621ed19dfd09b6e95e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classClassifier.html#a54e011d65ca4ab621ed19dfd09b6e95e">checkMatch</a> (Mat &amp;baseImage, Mat &amp;rollingImage)</td></tr>
<tr class="memdesc:a54e011d65ca4ab621ed19dfd09b6e95e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compares the initial image (base image) captured when the switch was pressed with the last picture taken (rolling image) and shows the difference between them in order to detect clear glass.  <a href="#a54e011d65ca4ab621ed19dfd09b6e95e">More...</a><br /></td></tr>
<tr class="separator:a54e011d65ca4ab621ed19dfd09b6e95e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9595af8c76b4f67f736d6bb74e4813d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classClassifier.html#ac9595af8c76b4f67f736d6bb74e4813d">classify</a> ()</td></tr>
<tr class="separator:ac9595af8c76b4f67f736d6bb74e4813d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae1d86fd96ce98820efbd6723da34710a"><td class="memItemLeft" align="right" valign="top"><a id="ae1d86fd96ce98820efbd6723da34710a"></a>
<a class="el" href="classCamera.html">Camera</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classClassifier.html#ae1d86fd96ce98820efbd6723da34710a">cameraptr</a></td></tr>
<tr class="memdesc:ae1d86fd96ce98820efbd6723da34710a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decleration of camera class pointer. <br /></td></tr>
<tr class="separator:ae1d86fd96ce98820efbd6723da34710a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b648bd73eb38b04c68941d92a27568d"><td class="memItemLeft" align="right" valign="top"><a id="a3b648bd73eb38b04c68941d92a27568d"></a>
<a class="el" href="classState.html">State</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classClassifier.html#a3b648bd73eb38b04c68941d92a27568d">stateptr</a></td></tr>
<tr class="memdesc:a3b648bd73eb38b04c68941d92a27568d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decleration of state class pointer. <br /></td></tr>
<tr class="separator:a3b648bd73eb38b04c68941d92a27568d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2690d1bf938a6aa2a6b5664e02979d90"><td class="memItemLeft" align="right" valign="top"><a id="a2690d1bf938a6aa2a6b5664e02979d90"></a>
<a class="el" href="classServo.html">Servo</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classClassifier.html#a2690d1bf938a6aa2a6b5664e02979d90">m_servoptr</a></td></tr>
<tr class="memdesc:a2690d1bf938a6aa2a6b5664e02979d90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decleration of servo class pointer. <br /></td></tr>
<tr class="separator:a2690d1bf938a6aa2a6b5664e02979d90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a974af9fa86f59c85454c8aae116db924"><td class="memItemLeft" align="right" valign="top"><a id="a974af9fa86f59c85454c8aae116db924"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classClassifier.html#a974af9fa86f59c85454c8aae116db924">loopNumber</a> = 0</td></tr>
<tr class="memdesc:a974af9fa86f59c85454c8aae116db924"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of times the classification loop has run, used to set threshold for clear classification after stabilisation <br /></td></tr>
<tr class="separator:a974af9fa86f59c85454c8aae116db924"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d79f401dd64e937d09b2944e0f27662"><td class="memItemLeft" align="right" valign="top"><a id="a2d79f401dd64e937d09b2944e0f27662"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classClassifier.html#a2d79f401dd64e937d09b2944e0f27662">decisionVector</a> [5]</td></tr>
<tr class="memdesc:a2d79f401dd64e937d09b2944e0f27662"><td class="mdescLeft">&#160;</td><td class="mdescRight">sets state only when 5 outputs of the same value are recieved <br /></td></tr>
<tr class="separator:a2d79f401dd64e937d09b2944e0f27662"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78942dee092ae33f8ba631226fd7624c"><td class="memItemLeft" align="right" valign="top"><a id="a78942dee092ae33f8ba631226fd7624c"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classClassifier.html#a78942dee092ae33f8ba631226fd7624c">bufferOn</a> = 0</td></tr>
<tr class="memdesc:a78942dee092ae33f8ba631226fd7624c"><td class="mdescLeft">&#160;</td><td class="mdescRight">States if a buffer of bottles in the tube is present. <br /></td></tr>
<tr class="separator:a78942dee092ae33f8ba631226fd7624c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad634b56d6ca1632117216282af511955"><td class="memItemLeft" align="right" valign="top"><a id="ad634b56d6ca1632117216282af511955"></a>
Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classClassifier.html#ad634b56d6ca1632117216282af511955">baseFrame</a></td></tr>
<tr class="memdesc:ad634b56d6ca1632117216282af511955"><td class="mdescLeft">&#160;</td><td class="mdescRight">intial frame for comparison to test for changes in order to identify clear glass <br /></td></tr>
<tr class="separator:ad634b56d6ca1632117216282af511955"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1098e920450cd5cbad65dfd91e9eab1f"><td class="memItemLeft" align="right" valign="top"><a id="a1098e920450cd5cbad65dfd91e9eab1f"></a>
Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classClassifier.html#a1098e920450cd5cbad65dfd91e9eab1f">baseGrey</a></td></tr>
<tr class="memdesc:a1098e920450cd5cbad65dfd91e9eab1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">empty Mat array to be filled with greyscale version of baseFrame <br /></td></tr>
<tr class="separator:a1098e920450cd5cbad65dfd91e9eab1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840f3be02dc8a5fa864eccce7ddf832d"><td class="memItemLeft" align="right" valign="top"><a id="a840f3be02dc8a5fa864eccce7ddf832d"></a>
Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classClassifier.html#a840f3be02dc8a5fa864eccce7ddf832d">rollingFrame</a></td></tr>
<tr class="memdesc:a840f3be02dc8a5fa864eccce7ddf832d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frame which is constantly updated by images captured by the camera. <br /></td></tr>
<tr class="separator:a840f3be02dc8a5fa864eccce7ddf832d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a342f74057902345ef48dc0569d2f723c"><td class="memItemLeft" align="right" valign="top"><a id="a342f74057902345ef48dc0569d2f723c"></a>
Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classClassifier.html#a342f74057902345ef48dc0569d2f723c">rollingGrey</a></td></tr>
<tr class="memdesc:a342f74057902345ef48dc0569d2f723c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Greyscale version of the rolingFrame. <br /></td></tr>
<tr class="separator:a342f74057902345ef48dc0569d2f723c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af977e066b99d99964301d315c6bef5d0"><td class="memItemLeft" align="right" valign="top"><a id="af977e066b99d99964301d315c6bef5d0"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classClassifier.html#af977e066b99d99964301d315c6bef5d0">baseClear</a></td></tr>
<tr class="memdesc:af977e066b99d99964301d315c6bef5d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">baseline clear value from setup <br /></td></tr>
<tr class="separator:af977e066b99d99964301d315c6bef5d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41595ec2adc79c610a568cde2930a6dc"><td class="memItemLeft" align="right" valign="top"><a id="a41595ec2adc79c610a568cde2930a6dc"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classClassifier.html#a41595ec2adc79c610a568cde2930a6dc">cCounter</a></td></tr>
<tr class="memdesc:a41595ec2adc79c610a568cde2930a6dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of altered pixels between base and rolling image. <br /></td></tr>
<tr class="separator:a41595ec2adc79c610a568cde2930a6dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe384a5a53728dfdf8dd717c9b574bff"><td class="memItemLeft" align="right" valign="top"><a id="abe384a5a53728dfdf8dd717c9b574bff"></a>
cv::Scalar&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classClassifier.html#abe384a5a53728dfdf8dd717c9b574bff">gCounter</a></td></tr>
<tr class="memdesc:abe384a5a53728dfdf8dd717c9b574bff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of detected pixels in greenOut. <br /></td></tr>
<tr class="separator:abe384a5a53728dfdf8dd717c9b574bff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66ca482d350d2c9b05081c6b7a62f0bc"><td class="memItemLeft" align="right" valign="top"><a id="a66ca482d350d2c9b05081c6b7a62f0bc"></a>
cv::Scalar&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classClassifier.html#a66ca482d350d2c9b05081c6b7a62f0bc">bCounter</a></td></tr>
<tr class="memdesc:a66ca482d350d2c9b05081c6b7a62f0bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of detected pixels in brownOut. <br /></td></tr>
<tr class="separator:a66ca482d350d2c9b05081c6b7a62f0bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b3f22e04f0c04653cbc9e1104d815c6"><td class="memItemLeft" align="right" valign="top"><a id="a1b3f22e04f0c04653cbc9e1104d815c6"></a>
Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classClassifier.html#a1b3f22e04f0c04653cbc9e1104d815c6">greenOut</a></td></tr>
<tr class="memdesc:a1b3f22e04f0c04653cbc9e1104d815c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">output of image after being thresholded for green <br /></td></tr>
<tr class="separator:a1b3f22e04f0c04653cbc9e1104d815c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb16b179964429195744dac2a2aaf159"><td class="memItemLeft" align="right" valign="top"><a id="afb16b179964429195744dac2a2aaf159"></a>
Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classClassifier.html#afb16b179964429195744dac2a2aaf159">brownOut</a></td></tr>
<tr class="memdesc:afb16b179964429195744dac2a2aaf159"><td class="mdescLeft">&#160;</td><td class="mdescRight">output of image after being thresholded for brown <br /></td></tr>
<tr class="separator:afb16b179964429195744dac2a2aaf159"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Classifies glass as brown, green or clear and sets state accordingly. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1ddf8171faa93f0a8ad4c230f1fa9554"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ddf8171faa93f0a8ad4c230f1fa9554">&#9670;&nbsp;</a></span>Classifier()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Classifier::Classifier </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classState.html">State</a> *&#160;</td>
          <td class="paramname"><em>_stateptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCamera.html">Camera</a> *&#160;</td>
          <td class="paramname"><em>_cameraptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classServo.html">Servo</a> *&#160;</td>
          <td class="paramname"><em>_servoptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor which sets up Mat arrays for all frames required for classification. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_stateptr</td><td>Pointer to state class </td></tr>
    <tr><td class="paramname">_cameraptr</td><td>Pointer to camera class </td></tr>
    <tr><td class="paramname">_servoptr</td><td>Pointer to <a class="el" href="classServo.html" title="Provides all functions required for motor control. ">Servo</a> class </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a54e011d65ca4ab621ed19dfd09b6e95e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54e011d65ca4ab621ed19dfd09b6e95e">&#9670;&nbsp;</a></span>checkMatch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Classifier::checkMatch </td>
          <td>(</td>
          <td class="paramtype">Mat &amp;&#160;</td>
          <td class="paramname"><em>baseImage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Mat &amp;&#160;</td>
          <td class="paramname"><em>rollingImage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compares the initial image (base image) captured when the switch was pressed with the last picture taken (rolling image) and shows the difference between them in order to detect clear glass. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">baseImage</td><td>Image captured of inner tube when switch is press </td></tr>
    <tr><td class="paramname">rollingImage</td><td>Last image cpatured by camera </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>counter the magnitude of difference between the two frames </dd></dl>

</div>
</div>
<a id="ac9595af8c76b4f67f736d6bb74e4813d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9595af8c76b4f67f736d6bb74e4813d">&#9670;&nbsp;</a></span>classify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Classifier::classify </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Classifies images to detect green, brown and clear glass and sets the state to the appropriate result so it can be read by other threads Captures images, converts them to grayscale and uses the checkMatch to check clear glass. Continuosly captures images and converts them to HSV and thresholds them to determine green and brown presence Decides what colour the glass was and this the current state and sets the state value accordingly </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/pi/Glassify/include/<a class="el" href="Classifier_8h_source.html">Classifier.h</a></li>
<li>/home/pi/Glassify/include/Classifier.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
